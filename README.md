# ИНДИВИДУАЛЬНОЕ ЗАДАНИЕ по дисциплине «Базы данных»
## ТЕМА: ПРОЕКТИРОВАНИЕ БАЗЫ ДАННЫХ

В данной работе реализована база данных сотрудника склада. 
Реализованы технологии добавления новых данных, а именно – товаров, контрактов и стеллажей, UDF - функции для проверки правильного добавления данных, представления для вывода всех действительных контрактов на сегодняшний день, заполненности помещения и стеллажей, а также создана возможность резервного копирования базы данных.

## 1.	Задание

Разработать БД для сотрудников склада.
1.	Разработка включает в себя следующие этапы:
2.	Проектирование БД (структура данных)
3.	Создание БД
4.	Создание таблиц и ограничений целостности
5.	Заполнение таблиц данным
6.	Разработка объектов промежуточного слоя (представлений, хранимых процедур, UDF-ов)
7.	Разработка стратегии резервного копирования

## 2.	Предметная область

БД «Склад» проектируем при условии, что:
–  на складе может быть несколько помещений;
– в каждом помещении может быть несколько стеллажей с хранимым товаром;
– товар на стеллажах может принадлежать разным компаниям и занимать разное место;
– у каждой компании хранящей свой товар на данном складе подписан контракт с данным складом;
– вместимость помещения принимается, как кол-во стеллажей которые можно разместить в помещении;
– вместимость стеллажа принимается, как кол-во товара, хранимого на стеллаже;

## 3.	Проектирование базы данных

Проектируем БД с использованием метода ER-диаграмм [1 – 3]. Выделим объекты и их атрибуты:
–  Companies (CompanyID*, Name, Address, PhoneNumber, TIN).
–  Contracts (ContractID*, CompanyID, StartDate, EndDate, Number).
–  Rooms (RoomID*, Capacity, Number).
–  Shelves (ShelfID*, RoomID, Capacity, Number).
Рассмотрим связь между объектами Companies и Contracts представленную на рисунке 1.

![image](https://github.com/user-attachments/assets/fd8a0b43-c3fd-4f48-b7b2-496b7cd8e82e)
Рисунок 1

 У одной компании может быть несколько контрактов, но у каждого контракта одна компания с которой он заключен, следовательно, в соответствии с правилом 4 [1 – 3] «Если степень взаимосвязи 1:M и классы принадлежности обеих сущностей обязательны, то ER-диаграмма преобразуется в общем случае в два, а в частности в одно отношение (таблицу). Схема первого отношения содержит атрибуты первой сущности, схема второго – атрибуты второй сущности и ключ первой сущности. Если схема первого отношения состоит только из ключевого атрибута, то отношение можно исключить как избыточное», получим:
–  Companies (CompanyID*, Name, Address, PhoneNumber, TIN).
–  Contracts (ContractID*, CompanyID, StartDate, EndDate, Number).
Рассмотрим связь между объектами Room и Shelves представленную на рисунке 2.

 ![image](https://github.com/user-attachments/assets/1bcd9813-6358-459d-9e73-7c2ba8d34178)
Рисунок 2

В одном помещении может находится несколько стеллажей, следовательно, в соответствии с правилом 4 [1 – 3] «Если степень взаимосвязи 1:M и классы принадлежности обеих сущностей обязательны, то ER-диаграмма преобразуется в общем случае в два, а в частности в одно отношение (таблицу). Схема первого отношения содержит атрибуты первой сущности, схема второго – атрибуты второй сущности и ключ первой сущности. Если схема первого отношения состоит только из ключевого атрибута, то отношение можно исключить как избыточное», получим:
–  Rooms (RoomID*, Capacity, Number).
–  Shelves (ShelfID*, RoomID, Capacity, Number).
Рассмотрим связь между объектами Contracts и Shelves представленную на рисунке 3.

 ![image](https://github.com/user-attachments/assets/9ad18885-4cba-4adf-8fc3-0cd830d76654)
Рисунок 3

По нескольким контрактам на нескольких полках могут хранится разные товары, следовательно, в соответствии с правилом 6 [1 – 3] «Если степень взаимосвязи двух сущностей равна M:N, то независимо от классов принадлежностей сущностей ER-диаграмма преобразуется в три отношения (три таблицы). Схемы первого и второго отношений содержат атрибуты соответствующих сущностей, а в схему третьего отношения включаются ключи обеих сущностей», получим:
–  Companies (CompanyID*, Name, Address, PhoneNumber, TIN).
–  Contracts (ContractID*, CompanyID, StartDate, EndDate, Number).
–  Rooms (RoomID*, Capacity, Number).
–  Shelves (ShelfID*, RoomID, Capacity, Number).
– Products (ProductID*, ShelfID, ContractID, Name, Type, Quantity);

В базе данных представлены следующие таблицы:
1.	Companies – таблица, хранящая информацию о компаниях с которыми заключен контракт на хранение, а именно: Идентификатор компании, название компании, адрес компании, контактный телефон и ИНН. Первичный ключ — CompanyID.
2.	Contracts  – таблица, хранящая информацию о номерах контрактах, заключенных со складом, а именно: Идентификатор контракта идентификатор компании, дата подписания контракта, дата окончания контракта. Первичный ключ — ContractID. Вторичный ключ — CompanyID.
3.	Rooms – таблица, хранящая информацию о помещениях склада, а именно: Идентификатор помещения и вместимость помещения. Первичный ключ — RoomID. 
4.	Shelves – таблица, хранящая информацию о стеллажах на которых хранится товар, а именно: Идентификатор стеллажа, идентификатор помещения и вместимость стеллажа. Первичный ключ — ShelfID. Вторичный ключ — RoomID.
5.	Products  –  таблица, хранящая информацию о товарах, хранящихся на складе, а именно: Идентификатор товара, идентификатор помещения, идентификатор контракта, название, тип, количество товара. Первичный ключ — ProductID. Вторичные ключи — ShelfID, RoomID.

![image](https://github.com/user-attachments/assets/02db77ca-f12e-44bd-b5f6-ba48487bd93f)
Рисунок 4. Диаграмма сущность—связь.
